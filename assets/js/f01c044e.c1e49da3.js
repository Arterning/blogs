"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2570],{8015:(e,t,a)=>{a.d(t,{Zo:()=>l,kt:()=>p});var n=a(757);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var c=n.createContext({}),u=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},l=function(e){var t=u(e.components);return n.createElement(c.Provider,{value:t},e.children)},d="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),d=u(a),m=o,p=d["".concat(c,".").concat(m)]||d[m]||h[m]||r;return a?n.createElement(p,s(s({ref:t},l),{},{components:a})):n.createElement(p,s({ref:t},l))}));function p(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,s=new Array(r);s[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[d]="string"==typeof e?e:o,s[1]=i;for(var u=2;u<r;u++)s[u]=a[u];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5402:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>u});var n=a(1227),o=(a(757),a(8015));const r={},s=void 0,i={unversionedId:"notes/\u6280\u672f\u6808/React/state management/ReactQuery/basic usage",id:"notes/\u6280\u672f\u6808/React/state management/ReactQuery/basic usage",title:"basic usage",description:"Great video. Important addition for everyone watching this: Don't use state managers for fetching data, use React Query and you will find that probably 90% of your state is actually server state. And React Query is handling refetching, loading state, errors and caching for you out of the box.",source:"@site/docs/notes/\u6280\u672f\u6808/React/state management/ReactQuery/basic usage.md",sourceDirName:"notes/\u6280\u672f\u6808/React/state management/ReactQuery",slug:"/notes/\u6280\u672f\u6808/React/state management/ReactQuery/basic usage",permalink:"/blogs/docs/notes/\u6280\u672f\u6808/React/state management/ReactQuery/basic usage",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/notes/\u6280\u672f\u6808/React/state management/ReactQuery/basic usage.md",tags:[],version:"current",frontMatter:{},sidebar:"notes",previous:{title:"Basic Usage",permalink:"/blogs/docs/notes/\u6280\u672f\u6808/React/state management/Hox/Basic Usage"},next:{title:"react query and SWR",permalink:"/blogs/docs/notes/\u6280\u672f\u6808/React/state management/ReactQuery/react query and SWR"}},c={},u=[],l={toc:u},d="wrapper";function h(e){let{components:t,...a}=e;return(0,o.kt)(d,(0,n.Z)({},l,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Great video. Important addition for everyone watching this: Don't use state managers for fetching data, use React Query and you will find that probably 90% of your state is actually server state. And React Query is handling refetching, loading state, errors and caching for you out of the box."),(0,o.kt)("p",null,"Can you elaborate? What if I got an e-commerce app with a cart?"),(0,o.kt)("p",null,"\xa0",(0,o.kt)("a",{parentName:"p",href:"https://www.youtube.com/channel/UCNOp5LoqK45NKEwGg7D-32g"},"@belkocik"),"\xa0 When a user is logged in, you store their cart on the server anyway. When adding an item, use useMutation to send a request to add item on the server and automatically refetch all items in the cart. When the user visits the site again, use useQuery to get all the items in the cart."),(0,o.kt)("p",null,"\u200b\xa0",(0,o.kt)("a",{parentName:"p",href:"https://www.youtube.com/channel/UCFFY80BHAAIL73xT8qRgu6A"},"@GVal98"),"\xa0 What about if user is not logged in? How to handle the problem when a not logged in user added a few items to a cart and then logged in? The question is what if there are items on the server that he added previously when he was logged in? Fetch only the items from server and show them in cart or compare the items in local storage with the server's one and do what? :D How to handle the issue? Would love to see some code beacause I don't know how to do it :D"),(0,o.kt)("p",null,"\xa0",(0,o.kt)("a",{parentName:"p",href:"https://www.youtube.com/channel/UCNOp5LoqK45NKEwGg7D-32g"},"@belkocik"),"\xa0 Either when adding items, you can ask the user to login to add items. Otherwise, if some items have been added to the localstorage, as soon as he logs in, add those new items to the server as well (need not update the existing items in the server)"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://www.youtube.com/channel/UCNOp5LoqK45NKEwGg7D-32g"},"@belkocik"),"\xa0 You can generate a guest id/session/token and use it in requests just like a regular user id. But the server must be ready for this and distinguish users from guests. As for the second question, you just do it like you did before with your state managment. I think it's up to you whether you want to combine items or just download from them the server."),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://www.youtube.com/channel/UCFFY80BHAAIL73xT8qRgu6A"},"@GVal98"),'\xa0 I don\'t think it\'s a good idea to fetch an auth data of the current user (email, name, phone, etc.) that doesn\'t need to be revalidated and only needs to be reset when a user logs out and then refetched again when they log in. Also, you need some api to manipulate that data. For example, in mobx I create a class with a public field "user", public methods "patchName", "logOut" and etc where I simply make some required requests and then change the store data like so: async logOut() { await userApi.logOut(); this.user = null; } I don\'t see such a simplicity with react-query. Also, when changing one data, somethimes you need to change other. How am I going to make a connection between states in react-query? In MobX I can simply do dependecy injection and refer to a root store like so: this.global.someStore.someMethod();'))}h.isMDXComponent=!0}}]);