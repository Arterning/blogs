"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1484],{8015:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var n=r(757);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(r),h=a,m=p["".concat(l,".").concat(h)]||p[h]||d[h]||o;return r?n.createElement(m,i(i({ref:t},u),{},{components:r})):n.createElement(m,i({ref:t},u))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},4732:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var n=r(1227),a=(r(757),r(8015));const o={},i=void 0,s={unversionedId:"notes/\u6280\u672f\u6808/Next/Next auth",id:"notes/\u6280\u672f\u6808/Next/Next auth",title:"Next auth",description:"The Credentials provider is specified like other providers, except that you need to define a handler for\xa0authorize()\xa0that accepts credentials submitted via HTTP POST as input and returns either:",source:"@site/docs/notes/\u6280\u672f\u6808/Next/Next auth.md",sourceDirName:"notes/\u6280\u672f\u6808/Next",slug:"/notes/\u6280\u672f\u6808/Next/Next auth",permalink:"/blogs/docs/notes/\u6280\u672f\u6808/Next/Next auth",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/notes/\u6280\u672f\u6808/Next/Next auth.md",tags:[],version:"current",frontMatter:{},sidebar:"notes",previous:{title:"\u5e38\u7528Hooks\u8be6\u89e3\u53ca\u5b9e\u8df5",permalink:"/blogs/docs/notes/\u6280\u672f\u6808/Next/\u5e38\u7528Hooks\u8be6\u89e3\u53ca\u5b9e\u8df5"},next:{title:"Docker desktop proxy",permalink:"/blogs/docs/notes/\u6280\u672f\u6808/docker/Docker desktop proxy"}},l={},c=[],u={toc:c},p="wrapper";function d(e){let{components:t,...r}=e;return(0,a.kt)(p,(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The Credentials provider is specified like other providers, except that you need to define a handler for\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"authorize()"),"\xa0that accepts credentials submitted via HTTP POST as input and returns either:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"A\xa0",(0,a.kt)("inlineCode",{parentName:"li"},"user"),"\xa0object, which indicates the credentials are valid.")),(0,a.kt)("p",null,"If you return an object it will be persisted to the JSON Web Token and the user will be signed in, unless a custom\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"signIn()"),"\xa0callback is configured that subsequently rejects it."),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"If you return\xa0",(0,a.kt)("inlineCode",{parentName:"li"},"null"),"\xa0then an error will be displayed advising the user to check their details."),(0,a.kt)("li",{parentName:"ol"},"If you throw an Error, the user will be sent to the error page with the error message as a query parameter.")),(0,a.kt)("p",null,"The Credentials provider's\xa0",(0,a.kt)("inlineCode",{parentName:"p"},"authorize()"),"\xa0method also provides the request object as the second parameter (see example below)."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'import CredentialsProvider from "next-auth/providers/credentials";\n...\nproviders: [\n  CredentialsProvider({\n    // The name to display on the sign in form (e.g. "Sign in with...")\n    name: "Credentials",\n    // `credentials` is used to generate a form on the sign in page.\n    // You can specify which fields should be submitted, by adding keys to the `credentials` object.\n    // e.g. domain, username, password, 2FA token, etc.\n    // You can pass any HTML attribute to the <input> tag through the object.\n    credentials: {\n      username: { label: "Username", type: "text", placeholder: "jsmith" },\n      password: { label: "Password", type: "password" }\n    },\n    async authorize(credentials, req) {\n      // Add logic here to look up the user from the credentials supplied\n      const user = { id: "1", name: "J Smith", email: "jsmith@example.com" }\n\n      if (user) {\n        // Any object returned will be saved in `user` property of the JWT\n        return user\n      } else {\n        // If you return null then an error will be displayed advising the user to check their details.\n        return null\n\n        // You can also Reject this callback with an Error thus the user will be sent to the error page with the error message as a query parameter\n      }\n    }\n  })\n]\n...\n')),(0,a.kt)("p",null,"The core logic is to find user by username and compare the hash password"))}d.isMDXComponent=!0}}]);